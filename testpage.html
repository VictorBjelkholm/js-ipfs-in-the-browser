<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width">
		<title>window.ipfs test page</title>
		<style>
			body {
				font-family: sans-serif;
				height: 100vh;
				background: linear-gradient(to bottom,#041727 0%,#062b3f 100%);
				color: white;
				text-align: center;
				padding-top: 50px;
			}

			div {
				margin-top: 50px;
			}
		</style>
	</head>
	<body>
		<h1>Is IPFS in the browser yet?</h1>
		<div><code>window.ipfs</code> exists? <span id="status">Loading</span></div>
		<div>Your ID: <span id='peerid'>N/A</span></div>
		<div>
			<h2>Add content</h2>
			<input id='content' type="text"><button id='add-content'>Add</button>
      <div id="hash"></div>
		</div>
		<script>
document.addEventListener('DOMContentLoaded', () => {
	$status = document.querySelector('#status')
	$peerID = document.querySelector('#peerid')
	$content = document.querySelector('#content')
	$addContent = document.querySelector('#add-content')
	$hash = document.querySelector('#hash')
		console.log(window.ipfs)
		if (typeof window.ipfs === 'undefined') {
			$status.innerText = 'nope'
		} else {
			$status.innerText = 'YEAH!'
			window.ipfs.id((res) => {
				console.log('Got ID')
				$peerID.innerText = res.id
			})
			$addContent.addEventListener('click', () => {
				const content = $content.value
				window.ipfs.add(content, (res) => {
					console.log('Got res')
					console.log(res)
          $hash.innerText = res[0].hash
				})
			}, false)
		}
}, false)
		</script>
	</body>
</html>
